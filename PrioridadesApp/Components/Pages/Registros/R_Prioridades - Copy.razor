@page "/R_Prioridades"
@page "/R_Prioridades/{PrioridadesId:int}"
@using PrioridadesApp.BLL
@using PrioridadesApp.Models


@inject PrioridadesBLL prioridadesBLL;
<EditForm Model="prioridad" OnValidSubmit="Guardar">

</EditForm>

@code {
    public int PrioridadId { get; set; }

    public Prioridades prioridad { get; set; } = new Prioridades();

    protected override void OnInitialized()
    {
        if(PrioridadId > 0)
        {
            this.prioridad.PriodidadID = PrioridadId;
            this.Buscar();
        }
    }

    void Buscar()
    {
        var prioridadEncontrada = prioridadesBLL.Buscar(prioridad.PriodidadID);
        if (prioridadEncontrada != null)
        {
            this.prioridad = prioridadEncontrada;
        }
    }

    void Nuevo()
    {
        this.prioridad = new Prioridades();
    }

    void Guardar()
    {
        if (!Validar())
        {
            return;
        }
        if (prioridadesBLL.Guardar(this.prioridad))
        {
            this.Nuevo();
        }
    }


}
